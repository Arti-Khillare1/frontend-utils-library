<form [formGroup]="myGroup" class="dialog-container">
  <header>
    <div class="header">
      <h3 class="text-white">{{dialogData.control.header}}</h3>
      <mat-icon class="cursor-pointer text-white" [mat-dialog-close]="false">close</mat-icon>
    </div>
  </header>
  <main formArrayName="resources" class="flex-grow overflow-auto p-4">
    <div *ngFor="let resourceGroup of resources.controls; let i = index" [formGroupName]="i" class="form-container">
      <div *ngFor="let control of dialogData.control.resource[i]" class="w-[45%]">
        <mat-form-field floatLabel="always" class="w-full" appearance="outline">
          <mat-label *ngIf="control.label">{{ control?.label }}</mat-label>
          <input
            matInput
            [placeholder]="control?.placeHolder"
            [type]="control?.type"
            [formControlName]="control?.name"
            [maxlength]="control?.validators.maxLength"
            [required]="control?.validators?.required"
            [pattern]="control?.validators?.pattern"
            [value]="control?.value"
          />
        </mat-form-field>
        <mat-error class="error-container" *ngIf="control?.errorMessage" >
          <div *ngIf="resourceGroup.get(control.name)?.touched && resourceGroup.get(control.name)?.invalid">
            <div class="error-message" *ngIf="control?.errorMessage[((resourceGroup.get(control.name)?.errors | keyvalue) || [])[0].key ]; else genericErrorMessage ">
              <mat-icon class="error-icon" matPrefix>error_outline</mat-icon>
              {{ control?.errorMessage[ ((resourceGroup.get(control.name)?.errors | keyvalue) || [])[0].key ] }}
            </div>
            <ng-template #genericErrorMessage>
              <div class="error-message">
                <mat-icon class="error-icon" matPrefix>error_outline</mat-icon>
                Enter {{ control?.label }}
              </div>
            </ng-template>
          </div>
        </mat-error>
      </div>
    </div>
    <div  class="button-container">
        <button (click)="onClickAddResource()" [disabled]="myGroup.invalid" mat-raised-button>
          <mat-icon class="cursor-pointer">add_circle</mat-icon>
          <p> {{dialogData.control?.addButton}}</p>
        </button>
    </div>
  </main>
  <hr>
  <section class="footer">
    <button mat-raised-button [mat-dialog-close]="false" class="cancel-btn">{{dialogData.control.cancelButton}}</button>
    <button [disabled]="myGroup.invalid" mat-raised-button [mat-dialog-close]="true" cdkFocusInitial (click)="confirmButton()">{{dialogData.control.confirmButton}}</button>
  </section>
</form>
